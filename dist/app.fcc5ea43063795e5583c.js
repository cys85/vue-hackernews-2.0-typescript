webpackJsonp([4],{124:function(t,e){},60:function(t,e,n){"use strict";(function(t){function r(){a((l.cachedIds.top||[]).slice(0,30)),setTimeout(r,9e5)}function i(t){h&&console.log("fetching "+t+"...");var e=l.cachedItems;return e&&e.has(t)?(h&&console.log("cache hit for "+t+"."),Promise.resolve(e.get(t))):new Promise(function(n,r){l.child(t).once("value",function(r){var i=r.val();i&&(i.__lastUpdated=Date.now()),e&&e.set(t,i),h&&console.log("fetched "+t+"."),n(i)},r)})}function o(t){return l.cachedIds&&l.cachedIds[t]?Promise.resolve(l.cachedIds[t]):i(t+"stories")}function s(t){return i("item/"+t)}function a(t){return Promise.all(t.map(function(t){return s(t)}))}function c(t){return i("user/"+t)}function u(t,e){var n=!0,r=l.child(t+"stories"),i=function(t){n?n=!1:e(t.val())};return r.on("value",i),function(){r.off("value",i)}}e.a=o,e.b=a,e.c=c,e.d=u;var f=n(69),h=!!t.env.DEBUG_API,l=Object(f.a)({version:"/v0",config:{databaseURL:"https://hacker-news.firebaseio.com"}});l.onServer&&r()}).call(e,n(21))},61:function(t,e,n){"use strict";function r(t){var e=t.replace(/^https?:\/\//,"").replace(/\/.*$/,""),n=e.split(".").slice(-3);return"www"===n[0]&&n.shift(),n.join(".")}function i(t){var e=Date.now()/1e3-Number(t);return e<3600?o(~~(e/60)," minute"):e<86400?o(~~(e/3600)," hour"):o(~~(e/86400)," day")}function o(t,e){return 1===t?t+e:t+e+"s"}Object.defineProperty(e,"__esModule",{value:!0}),e.host=r,e.timeAgo=i},62:function(t,e,n){"use strict";function r(t){n(66)}function i(){return new _.a.Store({state:{activeType:null,itemsPerPage:20,items:{},users:{},lists:{top:[],new:[],show:[],ask:[],job:[]}},actions:g,mutations:w,getters:E})}function o(){return new b.a({mode:"history",fallback:!1,scrollBehavior:function(){return{y:0}},routes:[{path:"/top/:page(\\d+)?",component:I("top")},{path:"/new/:page(\\d+)?",component:I("new")},{path:"/show/:page(\\d+)?",component:I("show")},{path:"/ask/:page(\\d+)?",component:I("ask")},{path:"/job/:page(\\d+)?",component:I("job")},{path:"/item/:id(\\d+)",component:S},{path:"/user/:id",component:y},{path:"/",redirect:"/top"}]})}function s(t){var e=t.$options.title;if(e)return"function"==typeof e?e.call(t):e}function a(t){n(124)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(9),u=(n(64),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"header"},[n("nav",{staticClass:"inner"},[n("router-link",{attrs:{to:"/",exact:""}},[n("img",{staticClass:"logo",attrs:{src:"public/logo-48.png",alt:"logo"}})]),n("router-link",{attrs:{to:"/top"}},[t._v("Top")]),n("router-link",{attrs:{to:"/new"}},[t._v("New")]),n("router-link",{attrs:{to:"/show"}},[t._v("Show")]),n("router-link",{attrs:{to:"/ask"}},[t._v("Ask")]),n("router-link",{attrs:{to:"/job"}},[t._v("Jobs")]),n("a",{staticClass:"github",attrs:{href:"https://github.com/vuejs/vue-hackernews-2.0",target:"_blank",rel:"noopener"}},[t._v("\n        Built with Vue.js\n      ")])],1)]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{staticClass:"view"})],1)],1)}),f=[],h={render:u,staticRenderFns:f},l=h,p=n(29),d=r,v=p(null,l,!1,d,null,null),m=v.exports,_=n(68),T=n(60),g={FETCH_LIST_DATA:function(t,e){var n=t.commit,r=t.dispatch,i=(t.state,e.type);return n("SET_ACTIVE_TYPE",{type:i}),Object(T.a)(i).then(function(t){return n("SET_LIST",{type:i,ids:t})}).then(function(){return r("ENSURE_ACTIVE_ITEMS")})},ENSURE_ACTIVE_ITEMS:function(t){return(0,t.dispatch)("FETCH_ITEMS",{ids:t.getters.activeIds})},FETCH_ITEMS:function(t,e){var n=t.commit,r=t.state,i=e.ids,o=Date.now();return i=i.filter(function(t){var e=r.items[t];return!e||o-e.__lastUpdated>18e4}),i.length?Object(T.b)(i).then(function(t){return n("SET_ITEMS",{items:t})}):Promise.resolve()},FETCH_USER:function(t,e){var n=t.commit,r=t.state,i=e.id;return r.users[i]?Promise.resolve(r.users[i]):Object(T.c)(i).then(function(t){return n("SET_USER",{id:i,user:t})})}},w={SET_ACTIVE_TYPE:function(t,e){var n=e.type;t.activeType=n},SET_LIST:function(t,e){var n=e.type,r=e.ids;t.lists[n]=r},SET_ITEMS:function(t,e){e.items.forEach(function(e){e&&c.a.set(t.items,e.id,e)})},SET_USER:function(t,e){var n=e.id,r=e.user;c.a.set(t.users,n,r||!1)}},E={activeIds:function(t){var e=t.activeType,n=t.itemsPerPage,r=t.lists;if(!e)return[];var i=Number(t.route.params.page)||1,o=(i-1)*n,s=i*n;return r[e].slice(o,s)},activeItems:function(t,e){return e.activeIds.map(function(e){return t.items[e]}).filter(function(t){return t})}};c.a.use(_.a);var b=n(122);c.a.use(b.a);var I=function(t){return function(){return n.e(1).then(n.bind(null,139)).then(function(e){return e.default(t)})}},S=function(){return n.e(0).then(n.bind(null,140))},y=function(){return n.e(2).then(n.bind(null,141))},k=n(123),C={mounted:function(){var t=s(this);t&&(document.title="Vue HN 2.0 | "+t)}},j=C,M=n(61);c.a.mixin(j),Object.keys(M).forEach(function(t){c.a.filter(t,M[t])});var P={data:function(){return{percent:0,show:!1,canSuccess:!0,duration:3e3,height:"2px",color:"#ffca2b",failedColor:"#ff0000"}},methods:{start:function(){var t=this;return this.show=!0,this.canSuccess=!0,this._timer&&(clearInterval(this._timer),this.percent=0),this._cut=1e4/Math.floor(this.duration),this._timer=setInterval(function(){t.increase(t._cut*Math.random()),t.percent>95&&t.finish()},100),this},set:function(t){return this.show=!0,this.canSuccess=!0,this.percent=Math.floor(t),this},get:function(){return Math.floor(this.percent)},increase:function(t){return this.percent=this.percent+Math.floor(t),this},decrease:function(t){return this.percent=this.percent-Math.floor(t),this},finish:function(){return this.percent=100,this.hide(),this},pause:function(){return clearInterval(this._timer),this},hide:function(){var t=this;return clearInterval(this._timer),this._timer=null,setTimeout(function(){t.show=!1,t.$nextTick(function(){setTimeout(function(){t.percent=0},200)})},500),this},fail:function(){return this.canSuccess=!1,this}}},A=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"progress",style:{width:t.percent+"%",height:t.height,"background-color":t.canSuccess?t.color:t.failedColor,opacity:t.show?1:0}})},R=[],$={render:A,staticRenderFns:R},U=$,N=n(29),O=a,x=N(P,U,!1,O,"data-v-0400fe34",null),D=x.exports,F=c.a.prototype.$bar=new c.a(D).$mount();document.body.appendChild(F.$el),c.a.mixin({beforeRouteUpdate:function(t,e,n){var r=this.$options.asyncData;r?r({store:this.$store,route:t}).then(n).catch(n):n()}});var L=function(){var t=i(),e=o();return Object(k.sync)(t,e),{app:new c.a({router:e,store:t,render:function(t){return t(m)}}),router:e,store:t}}(),V=L.app,H=L.router,B=L.store;window.__INITIAL_STATE__&&B.replaceState(window.__INITIAL_STATE__),H.onReady(function(){H.beforeResolve(function(t,e,n){var r=H.getMatchedComponents(t),i=H.getMatchedComponents(e),o=!1,s=r.filter(function(t,e){return o||(o=i[e]!==t)}),a=s.map(function(t){return t.asyncData}).filter(function(t){return t});if(!a.length)return n();F.start(),Promise.all(a.map(function(e){return e({store:B,route:t})})).then(function(){F.finish(),n()}).catch(n)}),V.$mount("#app")}),"https:"===location.protocol&&navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js")},66:function(t,e){},69:function(t,e,n){"use strict";function r(t){var e=t.config,n=t.version;return i.initializeApp(e),i.database().ref(n)}e.a=r;var i=n(70),o=(n.n(i),n(87));n.n(o)}},[62]);